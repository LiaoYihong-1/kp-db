{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\x1761\\\\Desktop\\\\refactoring\\\\demo_front\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";import _objectSpread from\"C:\\\\Users\\\\x1761\\\\Desktop\\\\refactoring\\\\demo_front\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\x1761\\\\Desktop\\\\refactoring\\\\demo_front\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from\"react\";import $ from\"jquery\";import Container from\"@material-ui/core/Container\";import CssBaseline from\"@material-ui/core/CssBaseline\";import Typography from\"@material-ui/core/Typography\";import Grid from\"@material-ui/core/Grid\";import FormControl from\"@material-ui/core/FormControl\";import InputLabel from\"@material-ui/core/InputLabel\";import Select from\"@material-ui/core/Select\";import Button from\"@material-ui/core/Button\";import{makeStyles}from\"@material-ui/core/styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStylesForm=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2)},margin:{margin:theme.spacing(1)}};});var targets=[''];export default function AddAction(props){var type=props.type,script_id=props.script_id;var classes=useStylesForm();var action_type=['','CLOSE','OPEN','SWITCH_OFF','SWITCH_ON'];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),gettarget=_useState2[0],setGettarget=_useState2[1];var _useState3=useState({action_type:'',target:0}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var handleChange=function handleChange(event){var name=event.target.name;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,event.target.value)));};function getTargets(){$.ajax({url:\"api/getFurnitures\",method:\"POST\",data:{id:sessionStorage.getItem(\"id\")},async:false,success:function success(res){if(res){for(var i in res){targets.push(res[i]);}}setGettarget(true);}});}useEffect(function(){if(!gettarget){getTargets();}});function sendAction(){$.ajax({url:\"api/action\",method:\"POST\",data:{scriptId:script_id,actionType:state.action_type,target:state.target},async:false,success:function success(res){if(res.success){alert('success');}else{alert(res.message);}}});}return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Add Action\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,noValidate:true,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(FormControl,{className:classes.margin,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-customized-select-label\",children:\"Action type\"}),/*#__PURE__*/_jsx(Select,{native:true,value:state.furniture_type,onChange:handleChange,inputProps:{name:'action_type',id:'type-native-simple'},children:action_type.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item,children:item});})})]}),/*#__PURE__*/_jsxs(FormControl,{className:classes.margin,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-customized-select-label\",children:\"Target id\"}),/*#__PURE__*/_jsx(Select,{native:true,value:state.target,onChange:handleChange,inputProps:{name:'target',id:'target-native-simple'},children:targets.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item,children:item});})})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:function onClick(){sendAction();},children:\"Add\"})]})]})]});}","map":{"version":3,"sources":["C:/Users/x1761/Desktop/refactoring/demo_front/my-app/src/components/main/addAction.jsx"],"names":["React","useEffect","useState","$","Container","CssBaseline","Typography","Grid","FormControl","InputLabel","Select","Button","makeStyles","useStylesForm","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","targets","AddAction","props","type","script_id","classes","action_type","gettarget","setGettarget","target","state","setState","handleChange","event","name","value","getTargets","ajax","url","method","data","id","sessionStorage","getItem","async","success","res","i","push","sendAction","scriptId","actionType","alert","message","furniture_type","map","item"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport $ from \"jquery\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nconst useStylesForm = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    }\r\n}));\r\nconst targets = [''];\r\nexport default function AddAction(props) {\r\n    const {type,script_id} = props;\r\n    const classes = useStylesForm();\r\n    const action_type = ['','CLOSE','OPEN','SWITCH_OFF','SWITCH_ON'];\r\n    const [gettarget,setGettarget] = useState(false);\r\n    const [state,setState] = useState({\r\n        action_type:'',\r\n        target:0\r\n    })\r\n    const handleChange = (event) => {\r\n        const name = event.target.name;\r\n        setState({\r\n            ...state,\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    function getTargets(){\r\n        $.ajax({\r\n                url: \"api/getFurnitures\",\r\n                method:\"POST\",\r\n                data:{\r\n                    id:sessionStorage.getItem(\"id\")\r\n                },\r\n                async:false,\r\n                success:function (res){\r\n                    if(res){\r\n                        for(var i in res){\r\n                            targets.push(res[i]);\r\n                        }\r\n                    }\r\n                    setGettarget(true);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    useEffect(()=>{\r\n        if(!gettarget){\r\n            getTargets();\r\n        }\r\n    })\r\n    function sendAction(){\r\n        $.ajax({\r\n                url: \"api/action\",\r\n                method:\"POST\",\r\n                data:{\r\n                    scriptId:script_id,\r\n                    actionType:state.action_type,\r\n                    target:state.target,\r\n                },\r\n                async:false,\r\n                success:function (res){\r\n                    if(res.success){\r\n                        alert('success');\r\n                    }else{\r\n                        alert(res.message);\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <CssBaseline />\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Add Action\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                    <Grid container spacing={2}>\r\n                        <FormControl className={classes.margin}>\r\n                            <InputLabel id=\"demo-customized-select-label\">Action type</InputLabel>\r\n                            <Select\r\n                                native\r\n                                value={state.furniture_type}\r\n                                onChange={handleChange}\r\n                                inputProps={{\r\n                                    name: 'action_type',\r\n                                    id: 'type-native-simple',\r\n                                }}\r\n                            >\r\n                                {\r\n                                    action_type.map(item=>(\r\n                                        <option value={item}>{item}</option>\r\n                                    ))\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                        <FormControl className={classes.margin}>\r\n                            <InputLabel id=\"demo-customized-select-label\">Target id</InputLabel>\r\n                            <Select\r\n                                native\r\n                                value={state.target}\r\n                                onChange={handleChange}\r\n                                inputProps={{\r\n                                    name: 'target',\r\n                                    id: 'target-native-simple',\r\n                                }}\r\n                            >\r\n                                {\r\n                                    targets.map(item=>(\r\n                                        <option value={item}>{item}</option>\r\n                                    ))\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Grid>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        onClick={()=> {\r\n                            sendAction()\r\n                        }}\r\n                    >\r\n                        Add\r\n                    </Button>\r\n                </form>\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}