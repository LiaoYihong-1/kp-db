{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\x1761\\\\Desktop\\\\refactoring\\\\demo_front\\\\my-app\\\\src\\\\components\\\\main\\\\addAction.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport $ from \"jquery\";\nimport Container from \"@material-ui/core/Container\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStylesForm = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  margin: {\n    margin: theme.spacing(1)\n  }\n}));\nconst targets = [''];\nexport default function AddAction(props) {\n  _s();\n\n  const {\n    type,\n    script_id\n  } = props;\n  const classes = useStylesForm();\n  const action_type = ['', 'CLOSE', 'OPEN', 'SWITCH_OFF', 'SWITCH_ON'];\n  const [gettarget, setGettarget] = useState(false);\n  const [state, setState] = useState({\n    action_type: '',\n    target: 0\n  });\n\n  const handleChange = event => {\n    const name = event.target.name;\n    setState({ ...state,\n      [name]: event.target.value\n    });\n  };\n\n  function getTargets() {\n    $.ajax({\n      url: \"api/getFurnitures\",\n      method: \"POST\",\n      data: {\n        id: sessionStorage.getItem(\"id\")\n      },\n      async: false,\n      success: function (res) {\n        if (res) {\n          for (var i in res) {\n            targets.push(res[i]);\n          }\n        }\n\n        setGettarget(true);\n      }\n    });\n  }\n\n  useEffect(() => {\n    if (!gettarget) {\n      getTargets();\n    }\n  });\n\n  function sendAction() {\n    $.ajax({\n      url: \"api/action\",\n      method: \"POST\",\n      data: {\n        scriptId: script_id,\n        actionType: state.action_type,\n        target: state.target\n      },\n      async: false,\n      success: function (res) {\n        if (res.success) {\n          alert('success');\n        } else {\n          alert(res.message);\n        }\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"Add Action\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            className: classes.margin,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"demo-customized-select-label\",\n              children: \"Action type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              native: true,\n              value: state.furniture_type,\n              onChange: handleChange,\n              inputProps: {\n                name: 'action_type',\n                id: 'type-native-simple'\n              },\n              children: action_type.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item,\n                children: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            className: classes.margin,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"demo-customized-select-label\",\n              children: \"Target id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              native: true,\n              value: state.target,\n              onChange: handleChange,\n              inputProps: {\n                name: 'target',\n                id: 'target-native-simple'\n              },\n              children: targets.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item,\n                children: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          onClick: () => {\n            sendAction();\n          },\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddAction, \"GXh3m8icOcGcC5O5faaoZrMYOY4=\", false, function () {\n  return [useStylesForm];\n});\n\n_c = AddAction;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddAction\");","map":{"version":3,"sources":["C:/Users/x1761/Desktop/refactoring/demo_front/my-app/src/components/main/addAction.jsx"],"names":["React","useEffect","useState","$","Container","CssBaseline","Typography","Grid","FormControl","InputLabel","Select","Button","makeStyles","useStylesForm","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","targets","AddAction","props","type","script_id","classes","action_type","gettarget","setGettarget","state","setState","target","handleChange","event","name","value","getTargets","ajax","url","method","data","id","sessionStorage","getItem","async","success","res","i","push","sendAction","scriptId","actionType","alert","message","furniture_type","map","item"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport $ from \"jquery\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nconst useStylesForm = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    }\r\n}));\r\nconst targets = [''];\r\nexport default function AddAction(props) {\r\n    const {type,script_id} = props;\r\n    const classes = useStylesForm();\r\n    const action_type = ['','CLOSE','OPEN','SWITCH_OFF','SWITCH_ON'];\r\n    const [gettarget,setGettarget] = useState(false);\r\n    const [state,setState] = useState({\r\n        action_type:'',\r\n        target:0\r\n    })\r\n    const handleChange = (event) => {\r\n        const name = event.target.name;\r\n        setState({\r\n            ...state,\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    function getTargets(){\r\n        $.ajax({\r\n                url: \"api/getFurnitures\",\r\n                method:\"POST\",\r\n                data:{\r\n                    id:sessionStorage.getItem(\"id\")\r\n                },\r\n                async:false,\r\n                success:function (res){\r\n                    if(res){\r\n                        for(var i in res){\r\n                            targets.push(res[i]);\r\n                        }\r\n                    }\r\n                    setGettarget(true);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    useEffect(()=>{\r\n        if(!gettarget){\r\n            getTargets();\r\n        }\r\n    })\r\n    function sendAction(){\r\n        $.ajax({\r\n                url: \"api/action\",\r\n                method:\"POST\",\r\n                data:{\r\n                    scriptId:script_id,\r\n                    actionType:state.action_type,\r\n                    target:state.target,\r\n                },\r\n                async:false,\r\n                success:function (res){\r\n                    if(res.success){\r\n                        alert('success');\r\n                    }else{\r\n                        alert(res.message);\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <CssBaseline />\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Add Action\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                    <Grid container spacing={2}>\r\n                        <FormControl className={classes.margin}>\r\n                            <InputLabel id=\"demo-customized-select-label\">Action type</InputLabel>\r\n                            <Select\r\n                                native\r\n                                value={state.furniture_type}\r\n                                onChange={handleChange}\r\n                                inputProps={{\r\n                                    name: 'action_type',\r\n                                    id: 'type-native-simple',\r\n                                }}\r\n                            >\r\n                                {\r\n                                    action_type.map(item=>(\r\n                                        <option value={item}>{item}</option>\r\n                                    ))\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                        <FormControl className={classes.margin}>\r\n                            <InputLabel id=\"demo-customized-select-label\">Target id</InputLabel>\r\n                            <Select\r\n                                native\r\n                                value={state.target}\r\n                                onChange={handleChange}\r\n                                inputProps={{\r\n                                    name: 'target',\r\n                                    id: 'target-native-simple',\r\n                                }}\r\n                            >\r\n                                {\r\n                                    targets.map(item=>(\r\n                                        <option value={item}>{item}</option>\r\n                                    ))\r\n                                }\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Grid>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        onClick={()=> {\r\n                            sendAction()\r\n                        }}\r\n                    >\r\n                        Add\r\n                    </Button>\r\n                </form>\r\n            </div>\r\n        </Container>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}